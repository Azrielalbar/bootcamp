<div style="text-align: center;">
  <h1><%= title %></h1>

  <h2>Contact List</h2>
  <table style="width: 100%; border-collapse: collapse; margin-top: 20px;">
      <thead>
          <tr>
              <th style="background-color: #0071e3; color: white; padding: 10px;">Name</th>
              <th style="background-color: #0071e3; color: white; padding: 10px;">Email</th>
              <th style="background-color: #0071e3; color: white; padding: 10px;">Actions</th>
          </tr>
      </thead>
      <tbody>
          <% contacts.forEach(contact => { %>
              <tr>
                  <td style="border: 1px solid #ccc; padding: 10px; text-align: center;"><%= contact.name %></td>
                  <td style="border: 1px solid #ccc; padding: 10px; text-align: center;"><%= contact.email %></td>
                  <td style="border: 1px solid #ccc; padding: 10px; text-align: center;">
                      <button onclick="viewDetails('<%= contact.id %>')" style="background-color: #0071e3; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; margin-right: 5px;">Details</button>
                      <button onclick="updateContact('<%= contact.id %>')" style="background-color: #f1c40f; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; margin-right: 5px;">Update</button>
                      <button onclick="confirmDelete('<%= contact.id %>')" style="background-color: #e74c3c; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer;">Delete</button>
                  </td>
              </tr>
          <% }); %>
      </tbody>
  </table>

  <!-- Button to Add Data -->
  <button class="add-button" id="addDataBtn" style="position: fixed; bottom: 30px; right: 30px; margin: 20px; background-color: #0071e3; color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 24px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); cursor: pointer; transition: background-color 0.3s;">+</button>

  <!-- Modal for Adding Data -->
  <div id="dataModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center;">
      <div class="modal-content" style="background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3); width: 400px; transition: transform 0.3s; animation: fadeIn 0.5s;">
          <span class="close" id="closeModal" style="cursor: pointer; color: #aaa; float: right; font-size: 28px;">&times;</span>
          <h2 style="text-align: center; color: #333;">Add New Contact</h2>
          <form id="contactForm" method="POST" action="/contact/add">
              <input type="text" name="name" placeholder="Name" required style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; transition: border 0.3s;">
              <input type="email" name="email" placeholder="Email" required style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; transition: border 0.3s;">
              <button type="submit" class="submit" style="background-color: #0071e3; color: white; border: none; padding: 12px; width: 100%; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; font-size: 16px;">Submit</button>
          </form>
      </div>
  </div>

   <!-- Modal for Update Data -->
   <div id="updateModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center;">
    <div class="modal-content" style="background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3); width: 400px; transition: transform 0.3s; animation: fadeIn 0.5s;">
        <span class="close" id="closeUpdateModal" style="cursor: pointer; color: #aaa; float: right; font-size: 28px;">&times;</span>
        <h2 style="text-align: center; color: #333;">Update Contact</h2>
        <form id="updateContactForm" method="POST" action="/contact/update">
            <input type="hidden" id="updateContactId" name="id">
            <input type="text" id="updateName" name="name" placeholder="Name" required style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; transition: border 0.3s;">
            <input type="email" id="updateEmail" name="email" placeholder="Email" required style="width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; transition: border 0.3s;">
            <button type="submit" class="submit" style="background-color: #0071e3; color: white; border: none; padding: 12px; width: 100%; border-radius: 4px; cursor: pointer; transition: background-color 0.3s; font-size: 16px;">Update</button>
        </form>
    </div>
</div>


  <!-- Modal for Confirm Delete -->
  <div id="confirmDeleteModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); justify-content: center; align-items: center;">
      <div class="modal-content" style="background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 15px rgba(0, 0, 0, 0.3); width: 400px; transition: transform 0.3s; animation: fadeIn 0.5s;">
          <h2 style="text-align: center; color: #333;">Confirm Delete</h2>
          <p style="text-align: center;">Are you sure you want to delete this contact?</p>
          <div style="text-align: center; margin-top: 20px;">
              <button id="confirmDeleteBtn" style="background-color: #e74c3c; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-right: 10px;">Delete</button>
              <button id="cancelDeleteBtn" style="background-color: #0071e3; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Cancel</button>
          </div>
      </div>
  </div>

  <style>
      @keyframes fadeIn {
          from {
              opacity: 0;
              transform: translateY(-20px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }

      #dataModal .modal-content input:focus {
          border-color: #0071e3;
          outline: none;
      }
  </style>

  <script>
      const addDataBtn = document.getElementById('addDataBtn');
      const modal = document.getElementById('dataModal');
      const closeModal = document.getElementById('closeModal');
      const confirmDeleteModal = document.getElementById('confirmDeleteModal');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');
      const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');

      let contactIdToDelete;

      addDataBtn.onclick = function() {
          modal.style.display = "flex";
      }

      closeModal.onclick = function() {
          modal.style.display = "none";
      }

      window.onclick = function(event) {
          if (event.target === modal) {
              modal.style.display = "none";
          }
          if (event.target === confirmDeleteModal) {
              confirmDeleteModal.style.display = "none";
          }
      }

      function viewDetails(id) {
          // Logika untuk melihat detail
          alert('Viewing details for contact ID: ' + id);
      }

      function updateContact(id) {
          // Logika untuk memperbarui kontak
          alert('Updating contact ID: ' + id);
      }

      function confirmDelete(id) {
          contactIdToDelete = id; // Simpan ID kontak yang ingin dihapus
          confirmDeleteModal.style.display = "flex"; // Tampilkan modal konfirmasi
      }

      confirmDeleteBtn.onclick = function() {
          alert('Deleting contact ID: ' + contactIdToDelete); // Ganti dengan logika penghapusan
          confirmDeleteModal.style.display = "none"; // Sembunyikan modal setelah konfirmasi
      }

      cancelDeleteBtn.onclick = function() {
          confirmDeleteModal.style.display = "none"; // Sembunyikan modal jika dibatalkan
      }
  </script>
</div>
